# Energy Consumption Forecasting for Smart Grids in California

This project focuses on forecasting energy consumption in California to optimize smart grids using historical energy consumption data, weather data, economic indicators, and employment data. The goal is to provide accurate predictions to enhance energy management and efficiency.

## Project Structure

- `data/`: Directory containing the data files.
  - `Retail_sales_of_electricity_monthly.csv`: Historical energy consumption data.
  - `weather_data.csv`: Historical weather data.
  - `california_GDP.csv`: California GDP data.
  - `california_Employment.csv`: California employment data.

- `outputs/`: Directory for storing the generated outputs (graphs, analyses, etc.).
  - `merged_data.csv`: The merged dataset used for analysis.
  - `monthly_avg_consumption_heatmap.png`: Heatmap of monthly average energy consumption.
  - `combined_metrics_over_time.png`: Combined metrics over time plot.
  - Other visualizations generated during the project.

- `scripts/`: Directory containing the Python scripts.
  - `eda.py`: Script for performing exploratory data analysis and visualizing the data.
  - `feature_engineering.py`: Script for feature engineering.
  - `model_training.py`: Script for training and evaluating the predictive models.
  - `second_analysis.py`: Script for seasonal analysis and comparison with economic indicators.
  - `lstm_forecasting.py`: Script for LSTM-based forecasting.
  - `anomaly_detection.py`: Script for detecting anomalies in energy consumption data.

- `venv/`: Directory containing the virtual environment setup.

- `requirements.txt`: List of Python packages required to run the scripts.
- `README.md`: Project documentation.

## Setup

1. **Create a virtual environment**:
    ```bash
    python -m venv venv
    ```

2. **Activate the virtual environment**:
    - On Windows:
      ```bash
      venv\Scripts\activate
      ```
    - On macOS/Linux:
      ```bash
      source venv/bin/activate
      ```

3. **Install the required packages**:
    ```bash
    pip install -r requirements.txt
    ```

## Running the Scripts

1. **Perform Exploratory Data Analysis (EDA)**:
    ```bash
    python scripts/eda.py
    ```
    This script performs EDA, merges different datasets, and generates visualizations to understand the data better.

2. **Perform Feature Engineering**:
    ```bash
    python scripts/feature_engineering.py
    ```
    This script performs feature engineering to prepare the data for modeling.

3. **Train and Evaluate Models**:
    ```bash
    python scripts/model_training.py
    ```
    This script trains machine learning models to forecast energy consumption and evaluates their performance.

5. **Perform Seasonal Analysis and Economic Comparison**:
    ```bash
    python scripts/second_analysis.py
    ```
    This script performs seasonal analysis of the energy consumption data and compares it with economic indicators like GDP and employment.

6. **LSTM-based Forecasting**:
    ```bash
    python scripts/lstm_forecasting.py
    ```
    This script uses LSTM models to forecast energy consumption for the next two years.

7. **Anomaly Detection**:
    ```bash
    python scripts/anomaly_detection.py
    ```
    This script detects anomalies in the energy consumption data.

## Scripts Explanation

### `eda.py`
This script performs exploratory data analysis (EDA) by visualizing the data using various plots and graphs. It merges different datasets to create a comprehensive view of the data.

### `feature_engineering.py`
This script performs feature engineering on the merged dataset to prepare it for modeling.

### `model_training.py`
This script trains machine learning models to forecast energy consumption. It evaluates the models and selects the best performing one.

### `second_analysis.py`
This script performs seasonal analysis of the energy consumption data and compares it with economic indicators like GDP and employment.

### `lstm_forecasting.py`
This script uses LSTM models to forecast energy consumption for the next two years and visualizes the results.

### `anomaly_detection.py`
This script detects anomalies in the energy consumption data using isolation forests and visualizes the results.

## Outputs

The outputs generated by the scripts are saved in the `outputs/` directory. These include:
- **EDA Plots**: Visualizations from the EDA script.
- **Heatmap**: Monthly average energy consumption heatmap.
- **Combined Metrics Plot**: Combined metrics of normalized energy consumption, GDP, and employment.
- **Future Predictions**: CSV file of future predictions and corresponding plot.
- **Anomaly Detection Plot**: Visualization of detected anomalies in the energy consumption data.

## Data Sources

- **Historical Energy Consumption Data**: Retail sales of electricity on a monthly basis. Sourced from [EIA Monthly Energy Review](https://www.eia.gov/totalenergy/data/monthly/).
- **Weather Data**: Historical weather data. Sourced from [NOAA NCEI](https://www.ncei.noaa.gov/).
- **GDP Data**: California GDP data. Sourced from [BEA GDP Data](https://www.bea.gov/).
- **Employment Data**: California employment data. Sourced from [BLS Employment Data](https://www.bls.gov/).

## Requirements

The project requires the following Python packages:
- pandas
- matplotlib
- seaborn
- statsmodels
- scikit-learn
- keras
- tensorflow

Install these packages using `pip`:
```bash
pip install -r requirements.txt
```
